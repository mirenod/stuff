#!/bin/bash

# Current environment
current_environment="test"

# Extract ignore_environment value using yq
ignore_env=$(yq e '.ignore_environment[]' your_file.yml)

# Convert to array
IFS=$'\n' read -r -d '' -a ignore_env_array < <(echo "$ignore_env"$'\0')

# Check if current environment is in ignore_env_array
for env in "${ignore_env_array[@]}"; do
    if [[ "$env" == "$current_environment" ]]; then
        echo "Skipping part of the script because the current environment is $current_environment."
        exit 0  # Skip the rest of the script
    fi
done

# Continue with the rest of your script
echo "Continuing with the script..."
# Place the rest of your script here
